let t=0;const s=2e3,n=()=>{const e=Date.now();if(e-t<s){console.log("StonkGaze: Skipping duplicate snapshot");return}t=e;const o={title:document.title,url:window.location.href,text:document.body?.innerText?.slice(0,2e3)||""};chrome.runtime.sendMessage({type:"STONK_PAGE",payload:o})};window.addEventListener("load",()=>{setTimeout(n,500)});chrome.runtime.onMessage.addListener(e=>{e?.type==="STONK_REFRESH"&&(t=0,n())});
